---
# ── Play 1 : Install K3s server ──────────────────────────────────────────────
- name: Setup K3s Server
  hosts: k3s_server
  gather_facts: true
  roles:
    - k3s_server
  tags: [k3s_server]

# ── Play 2 : Join K3s agents ─────────────────────────────────────────────────
- name: Setup K3s Agents
  hosts: k3s_agents
  gather_facts: true
  roles:
    - k3s_agent
  tags: [k3s_agent]

# ── Play 3 : Build & deploy the shop app ─────────────────────────────────────
- name: Deploy Shop Application
  hosts: k3s_server
  gather_facts: false
  roles:
    - app_deploy
  tags: [app]
